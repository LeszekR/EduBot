function loadTinyMCE(n,t,i,r,u,f,e){var h,c,s,o,a,l;if(n=n||"en-us",h="",c="",typeof i!="undefined"&&i!=null)for(s=i.split("|"),o=0;o<s.length;o++)h+=","+s[o],c+=",|,"+s[o];tinyMCE.editContainerHandler=function(n,t){for(var i=n.selection.getNode(),r,f,u;i!=null&&(!i.className||!i.className.match(/\bpluginHolder\b/))&&(!i.className||!i.className.match(/\bpluginEditHolder\b/));)i.className&&i.className.match(/\b(pluginEditHolderLink|pluginRemoveHolderLink)\b/)&&(r=i),i=i.parentNode;i!=null&&(i.className.match(/\bpluginHolder\b/)||i.className.match(/\bpluginEditHolder\b/))&&n.windowManager.count===0&&(f=i.getAttribute("pluginCommand"),r?(n.selection.select(i),r.className.match(/\bpluginEditHolderLink\b/)?n.execCommand(f,!1,null):r.className.match(/\bpluginRemoveHolderLink\b/)&&tinyMCE.DOM.remove(i.parentNode)):(u=$.Event(t),u.preventDefault(),u.stopPropagation()))},tinyMCE.init({mode:"specific_textareas",editor_selector:f!=null?f:"richText",theme:"advanced",skin:"galleries",convert_urls:!1,language:n.substr(0,2),readonly:e===!0?!0:!1,plugins:"safari,spellchecker,pagebreak,style,layer,table,advhr,advlink,iespell,inlinepopups,insertdatetime,preview,searchreplace,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template,fullscreen"+h,theme_advanced_buttons1:"cut,copy,paste,|,undo,redo,|,justifyleft,justifycenter,justifyright,justifyfull,|,numlist,bullist,|,outdent,indent,|,link,unlink,|,fullscreen,code",theme_advanced_buttons2:"formatselect,fontsizeselect,|,backcolor,forecolor,|,bold,italic,underline"+c,theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",handle_event_callback:t,extended_valid_elements:"style[type],div[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|pluginCommand]",locale:n,oninit:function(){if(typeof r!="undefined"&&r!=null&&r(),typeof tinyMCEGlobalInitFunctions!="undefined"&&tinyMCEGlobalInitFunctions!=null)for(var n=0;n<tinyMCEGlobalInitFunctions.length;n++)tinyMCEGlobalInitFunctions[n]()},setup:function(n){n.onInit.add(function(n){n.isInitialized||($(n.getContentAreaContainer()).is(":visible")&&n.execCommand("RespectVisibilityInDesign",!0,null),n.translate=a,n.getLang=l,n.isInitialized=!0)});var t=!1;n.onNodeChange.add(function(n,i,r){var e,o;if(t){if(tinyMCE.settings.fullscreen_is_enabled){if(tinyMCE.settings.fullscreen_editor_id===n.id)return;if(tinyMCE.settings.full_screen_is_closing)return}for(e=r;e!=null&&(!e.className||!e.className.match(/\bpluginHolder\b/));)e=e.parentNode;e!=null&&e.className.match(/\bpluginHolder\b/)&&n.windowManager.count===0&&(o=e.getAttribute("pluginCommand"),n.selection.select(e),n.execCommand(o,!1,null))}else n.isInitialized&&(t=!0)}),n.onBeforeExecCommand.add(function(){}),n.onSetContent.add(function(){typeof u=="function"&&u!=null&&u()}),n.onClick.add(function(n,t){tinyMCE.editContainerHandler(n,t)}),n.onKeyDown.add(function(n,t){tinyMCE.editContainerHandler(n,t)}),n.onKeyUp.add(function(){typeof u=="function"&&u!=null&&u()}),n.onChange.add(function(){typeof u=="function"&&u!=null&&u()}),n.onActivate.add(function(){typeof u=="function"&&u!=null&&u()}),n.onClick.add(function(){typeof u=="function"&&u!=null&&u()})}}),a=function(n){var i=this.settings.language||"en",t=tinymce.i18n;return n?t[i+"."+n]||n.replace(/\{\#([^\}]+)\}/g,function(n,r){return t[i+"."+r]||t["en."+r]||"{#"+r+"}"}):""},l=function(n,t){return tinymce.i18n[(this.settings.language||"en")+"."+n]||tinymce.i18n["en."+n]||(tinymce.is(t)?t:"{#"+n+"}")}}function getCleanDescription(n){var t=tinyMCEStripElementContent(n).text();return t&&(t=t.replace(/[\s\u00A0]/g,"")),t}function setupVsixIdBox(n,t,i){!i&&($("input[name='"+n+"'][value='10.0']").get(0).checked||$("input[name='"+n+"'][value='11.0']").get(0).checked||$("input[name='"+n+"'][value='12.0']").get(0).checked)&&$("#"+t).show(),$("input[name='"+n+"'][value='10.0']").click(function(){var i=!1;$("input[name='"+n+"'][value^='1']").each(function(){i|=this.checked}),i?$("#"+t).show():$("#"+t).hide()}),$("input[name='"+n+"'][value='11.0']").click(function(){var i=!1;$("input[name='"+n+"'][value^='1']").each(function(){i|=this.checked}),i?$("#"+t).show():$("#"+t).hide()}),$("input[name='"+n+"'][value='12.0']").click(function(){var i=!1;$("input[name='"+n+"'][value^='1']").each(function(){i|=this.checked}),i?$("#"+t).show():$("#"+t).hide()})}function setupSupportedVSEditionsBox(n,t,i,r){i||$("input[name='"+n+"'][value='"+r+"']").get(0).checked?$("#"+t).show():$("#"+t).hide(),$("input[name='"+n+"'][value='"+r+"']").click(function(){this.checked?$("#"+t).show():$("#"+t).hide()})}function setCheckBoxState(n,t,i){$("#"+n+" input").each(function(){if(i!=null&&$(this).attr("checked",i),t!=null)if(t){var r=$(this).clone();r.attr("id",r.attr("id")+"_clone"),i!=null&&r.attr("checked",i),r.attr("disabled",t),$(this).after(r),$(this).hide()}else $(this).attr("disabled",t)})}function attachSortHandler(n,t,i){var u="#"+n,r="#"+t;$(u).change(function(){var f=$(this).val(),e=i>0?"&":"?",u=$(r).attr("href")+e+"sortBy="+f;$(r).attr("href",u),$.browser.msie?document.getElementById(t).click():window.location=u})}function attachLogoTooltipHandler(){$(".contributionLogo").each(function(){$(this).hover(function(){var n=$(this).children(".contributionLogoTip");n&&(n.css("top","20px"),n.css("left","0px"),n.show())},function(){var n=$(this).children(".contributionLogoTip");n&&n.hide()})})}function attachCustomLogoHandler(){$(".customcontribution").each(function(){$(this).hover(function(){var n=$(this).children(".customcontributionLogoTip");n&&(n.css("top","15px"),n.css("left","0px"),n.show())},function(){var n=$(this).children(".customcontributionLogoTip");n&&n.hide()})})}var tinyMCEGlobalInitFunctions=[],tinyMCEStripElementContent=function(){return function(n){var t=$(n).clone().empty();return $(n).children().each(function(n,i){t.append($(i).clone())}),$(".hidden, .scriptcode, img",t).remove(),$("h1, h2, h3",t).each(function(){Galleries.tinyMCETemplate.checkHeader($(this).text())&&$(this).remove()}),t}}(),Galleries,StreamEvents;$(function(){jQuery.fn.createHiddenDiv=function(n){var i=this,t=$('<div id="'+n+'"></div>');return t.hide(),i.append(t),t},jQuery.fn.createProgressDiv=function(n,t){var r=this,i=$('<div id="'+n+'"></div>');return i.hide(),r.append(i),i.html('<div style="float: right; padding-top: 5px;"></div><img src="'+t+'" style="float: left; margin-right: 10px;" />'),i},jQuery.fn.impromptuWithContentReplace=function(n,t){var i="40%";$.prompt(n.html(),{top:i,buttons:{},prefix:t}),$("."+t+"message").replaceWith(n.show())},jQuery.fn.Tabify=function(n,t,i){function u(n){return $("#"+n.id.split("_")[0]+"_Content")}var f=this,e=this.map(function(){return u(this).get()}),r;this.click(function(){f.removeClass(n),$(this).addClass(n),e.hide(),u(this).show(),i&&i(this.id)}),t&&(r=$("#"+t+"_Tab"),r.data("pageLoad",!0),r.click(),r.data("pageLoad",!1))},jQuery.fn.resizeComplete=function(n){function r(){u()?(clearTimeout(f),n(),i=!1):(o=t.height(),e=t.width(),f=setTimeout(function(){r()},250))}function u(){var i=t.height(),n=t.width();return i===o&&n===e}function s(){i||u()||(i=!0,r())}var t=this,o=t.height(),e=t.width(),i=!1,f;$.browser.mozilla?t.resize(n):t.resize(s)},jQuery.fn.ToggleView=function(){function i(n){return $("."+n.id.split("_")[0]+"_NonDefault")}function r(n){return $("#"+n.id+"_All")}function u(n){return $("#"+n.id+"_Defaults")}var f=this,t=this.map(function(){return r(this).get()}),n=this.map(function(){return u(this).get()});t.click(function(){return n.show(),t.hide(),i(this).show(),!1}),n.click(function(){return n.hide(),t.show(),i(this).hide(),!1}),n.click()},jQuery.fn.WireTrackerForEvent=function(n,t,i,r,u){this.bind(n,function(){$().TrackEvent(t,i,r,u)})},jQuery.fn.TrackEvent=function(n,t,i,r){var u=n+(n.indexOf("?")>-1?"&":"?")+"Event="+escape(t)+"&Data="+escape(i)+"&Time="+ +new Date;$.ajax({type:"GET",url:u,async:r,timeout:500})},jQuery.fn.getJSONGalleries=function(n,t){$.getJSON(n,t,function(n,t){t==="success"&&$.each(n,function(n,t){$("#"+t.ElementId).html(t.Content)})})},jQuery.fn.watermark=function(n){var i=function(t){t.val()===""&&(t.val(n),t.addClass("watermark"))},r=function(t){t.val()===n&&(t.val(""),t.removeClass("watermark"))},t=$(this);this.focus(function(){r(t)}),this.blur(function(){i(t)}),this.change(function(){i(t)}),$(function(){i(t)})},jQuery.fn.trackCopy=function(n){var i=this[0],r=3,f=99,u=67,t=function(){var t=null;if(document.selection?t=document.selection.createRange().parentElement():window.getSelection()&&(t=window.getSelection().anchorNode),t){while(t!=null&&t!=i)t=t.parentNode;t==i&&n()}};$(document).mouseup(function(n){n.which==r&&t()}),$(document).keydown(function(n){n.ctrlKey&&(n.keyCode==f||n.keyCode==u)&&t()})},jQuery.fn.split=function(){var n={initialSize:265,paneSpacing:20,minLeftPaneWidth:265,minRightPaneWidth:400,splitter:'<div style="float: left;cursor: w-resize;"><div></div></div>',splitterCss:{width:"5px",background:"rgb(232, 232, 232)"},resizerCss:{height:"30px",border:"2px dotted rgb(0, 0, 0)"}},t=function(t){var c=0,h=0,e=!1,i=t?$().extend({},n,t):n,s=this,o=$("> div",this),r=$(o[0]).css({float:"left",width:i.initialSize+"px",overflow:"auto"}),l=$(o[1]).css({"margin-left":i.initialSize+i.paneSpacing+"px"}),f,u;this.mousedown(function(n){if(e)return n.preventDefault(),n.stopImmediatePropagation(),!1}),$(document).mousemove(function(n){if(e){var u=n.pageX-c,t=h+u;t<i.minLeftPaneWidth?t=i.minLeftPaneWidth:s.width()-t-i.paneSpacing<i.minRightPaneWidth&&(t=s.width()-i.minRightPaneWidth-i.paneSpacing),r.width(t),l.css("margin-left",t+i.paneSpacing)}}).mouseup(function(){e=!1}),f=$(i.splitter).height(r.css("height")?r.css("height"):r.height()).mousedown(function(n){c=n.pageX,h=r.width(),e=!0}).insertAfter(o[0]),typeof i.splitterCss=="string"?f.addClass(i.splitterCss):f.css(i.splitterCss),u=$("div",f),u.length>0&&(typeof i.resizerCss=="string"?u.addClass(i.resizerCss):u.css(i.resizerCss),u.css("margin-top",r.height()/2-u.height()/2+"px"))};return t.defaultOptions=n,t}(),jQuery.fn.addListFilter=function(){function f(n){t=n?$().extend({},u,n):u,i=this,h(),s()}function h(){var u=$("<div id='filterInputBox'></div>").insertBefore(i),r;$("<table class='filterBox'><tbody><tr><td class='stxtcell'></td><td id='filterImageCell'></td></tr></tbody></table><span id='spnNoMatch' style='display:none;margin-left:10px;'>"+t.noMatchMessage+"</span>").appendTo(u),r=$("td",u),n=$("<input id='filterInput' type='text' class='stxtinptpassive'>").appendTo(r[0]),$("<input id='filterImg' type='image' src='"+t.transGifUrl+"'>").appendTo(r[1]),n.val(t.watermark)}function s(){n.change(function(){r()}),n.keyup(function(){r()}),n.focus(function(){o()}),n.blur(function(){e()})}function r(){var u,r,f;$("#spnNoMatch").hide(),u=n.val().toLowerCase(),u.length==0||u==String(t.watermark).toLowerCase()?i.children().show():(i.children().hide(),r=$("input",i).filter(function(){return $(this).attr("data-tag").toLowerCase().indexOf(u)!=-1}),r.length==0?$("#spnNoMatch").show():(r.show(),r.next("label").show(),r.prev("br").show(),f=$(r.get(0)).prev("br"),f&&f.hide()))}function e(){n.val()==""&&n.val(t.watermark),n.removeClass("stxtinpt").addClass("stxtinptpassive"),r()}function o(){n.val(""),n.removeClass("stxtinptpassive").addClass("stxtinpt")}var u={watermark:"Search for Tags"},i,t,n;return f.defaultOptions=u,f}()}),Galleries={},Galleries.upload=function(){function i(n,t,i,r,u){function o(u){function f(){$("div.attachment[data-file="+u+"]",t).remove(),n.removeFileFromFileContainer(u)}return r&&r(u),i?$.ajax({url:i.replace(/\{:FileId:\}/g,u),data:{fileId:u},type:"delete",success:function(){f()}}):f(),!1}function f(i,r,u,f){if(n.addFileToFileContainer(u,f,i,r),f==="Attachment"){var h=s.replace(/\{:FileUrl:\}/g,r).replace(/\{:FileName:\}/g,i).replace(/\{:FileId:\}/g,u),e=$(h);e.find(".removeAttachment").click(function(){return o(u),!1}),e.appendTo(t)}}function h(){$.each(u,function(n,t){f(t.name,t.url,t.fileId,t.type)})}var s="<div class='attachment' data-file='{:FileId:}'> <div class='displayAttachment'><a href='{:FileUrl:}' title='{:FileName:}' target='_blank'>{:FileName:}</a></div><a href='#' class='removeAttachment'></a></div>",e={removeAttachment:o,addAttachment:f};return this.fileAttachmentManager=e,h(),e}function u(t,i,r,u,f,e){return n(t,i,null,"Tag","tag","addedTags",r,u,f,e)}function t(t,i,r,u,f,e){return n(t,i,r,"ProjectName","projectTitle","addedProjects",u,null,f,e)}function n(n,t,i,r,u,f,e,o,s,h){function a(){b.html(""),$.each(l,function(n,i){var u=i.value,r;t.indexOf("[indexer]")>-1&&(u=u.replace(/\[indexer\]/ig,"["+n+"]")),r=$(u),$("a",r).click(function(){l=jQuery.grep(l,function(n){return n.id!=i.id}),a()}),b.append(r)})}function p(n,r,f){var c="<div class='"+u+"'>",v="<input type='hidden' name='"+t+"' value = '"+n+"' />",y=i?"<input type='hidden' name='"+i+"' value = '"+f+"' />":"",o="<label>"+r+"</label>",s="<a>"+e.removeLink+"</a>",h="</div>";l.push({id:w,value:c+v+y+o+s+h}),w++,a()}function v(n,t){if(n!=e.watermark||t){k.children().remove();var i={};i[r]=n,$.post(s,i,function(n){n.IsError?n.ErrorMessage&&k.append("<span class='field-validation-error'>"+n.ErrorMessage+"</span>"):(c.val("").trigger("change").blur(),p(n.EncodedValue,n.DisplayString,n.EncodedDisplayString),a())})}}var y={addItem:null},l=[],w=0,c=$("input[type=text]",n),b=$("."+f,n),k=$(".errors",n);return h=h||[],o&&c.autocomplete(o,{tagMode:"single",enterKeyCallback:v,watermark:e.watermark}),c.next("a").click(function(){v($(this).prev("input").val())}),c.keydown(function(n){n.which!=13||n.isPropagationStopped()||(n.preventDefault(),n.stopPropagation(),c.next("a").click())}),$.each(h,function(){p(this.encodedValue,this.displayString,this.encodedDisplayString)}),y.addItem=v,y}var r=function(n){var u=$(n[0]),r=function(n){return $("input[name=files][data-type="+n+"]",u).map(function(){return this.value})},f=function(t){$("input[name=files][value="+t+"]",n).remove()},i=function(t,i,r,u){$("<input type='hidden' name='files' />").attr("value",t).attr("data-file",t).attr("data-type",i).attr("data-name",r||null).attr("data-url",u||null).appendTo(n)},t={getFilesFromContainer:r,removeFileFromFileContainer:f,addFileToFileContainer:i};return this.fileContainer=t,t};return{createFileContainer:r,createAttachmentManager:i,createTagger:u,createProjectList:t,createListInput:n}}(),Galleries.tinyMCETemplate=function(){function f(t,u,f){i=u;var e=function(){tinyMCE.activeEditor.isNotDirty=!0;var i=tinyMCE.activeEditor.getContent();if(i&&i.length!==0)n=!0;else{if(tinyMCE.activeEditor.id!=t)return;typeof f!="undefined"&&f!=null&&r(f,!0)}};tinyMCEGlobalInitFunctions.push(e)}function r(t,r,u){if(typeof tinyMCE!="undefined"&&tinyMCE!=null){if(!r&&(tinyMCE.activeEditor.isDirty()||n)){var f=tinyMCE.activeEditor.getContent();if(f&&f.length>0&&typeof u!="undefined"&&u!=null){u();return}}tinyMCE.activeEditor.setContent(i[t]),tinyMCE.activeEditor.isNotDirty=!0,n=!1}}function u(n){return t.length==0&&$.each(i,function(n,i){var r=$("<div></div");r.html(i),$("h1, h2, h3",r).each(function(){t.push($(this).text())})}),$.inArray(n,t)>-1}var i,t=[],n=!1;return{init:f,checkHeader:u,setTinyMCETemplate:r}}(),Galleries.SourceCodeBrowser=function(){function e(t){n=t,l(),h(),a(),c(),$(window).bind("popstate",o)}function l(){$(".sourceListTabs > div").addClass("languageTab"),t($(".sourceListTabs div:first"))}function a(){$(".langContent > .browserDir").each(function(){u(this)}),$(".languageNode").css("display","none")}function c(){var o=$("div#sourceItem").children('[class!="heading"]'),f,r,e,u;if(o.length>0){for(f=$(".sourceList a[data-fileid="+n.loadedFileId+"][data-pathid="+n.loadedPathId+"]"),r=f,r.children("div:first").addClass("sbsf");r&&r.length;)r=r.parent().prev(".browserDir"),s(r);e=$(f).parents(".langContent").attr("id").replace("_Content",""),t($("#"+e)),i(n.loadedFileId),window.history&&window.history.pushState&&(u={title:document.title,fileId:n.loadedFileId,pathId:n.loadedPathId},window.history.replaceState(u,null,document.location.href))}else window.history&&window.history.pushState&&(u={title:document.title},window.history.replaceState(u,null))}function h(){$(".browserDir").bind("click",this,function(){u(this)}),$(".browseFile").bind("click",this,function(t){t.preventDefault(),r(this,!0),Galleries.url.recordAdditionalPageView("SourceCode_File_"+$(this).data("pathid"),n.statisticsUrl?n.statisticsUrl:null)}),$(".languageTab").bind("click",this,function(){t(this)})}function i(n){function y(n){return n.length>0&&n[0].innerText?n[0].innerText:l(n)}var l=jQuery.text,r=$("div#sourceItem > div+div > pre"),e,i,s,h,o;if(r.length>0){r.parent().trackCopy(function(){f(n)}),jQuery.text=y;var c=$.trim(r.text().replace(/(\r(\n)?)|((\r)?\n)/ig,"\r\n")),a=!1,t=v(),u=c.split("\r\n");t&&t<=u.length+1&&(e=u[t-1],u[t-1]=e.replace(e,"(hts)"+e+"(hte)"),r.text(u.join("\r\n")),a=!0),r.chili(),a&&(i=$("div#sourceItem > div+div > pre"),s=i.html().replace("(hts)","<span id='scrollLine' class='linehighlight'>").replace("(hte)","</span>"),i.html("<pre>"+s+"</pre>"),$("body").hasClass("IE7")||$("body").hasClass("IE8")||$("body").hasClass("IE9")?document.getElementById("scrollLine").scrollIntoView():(h=i.css("line-height").replace("px",""),i.parent().scrollTop((t-5)*h))),jQuery.text=l,window.clipboardData&&clipboardData.setData&&(o=$("div#sourceItem a.copyCode"),o.click(function(){return f(n),clipboardData.setData("Text",c),!1}),o.show())}}function v(){var r="lineno",i=document.location.search.substring(1),t={},n;return i&&i.replace(/([^?=&]+)=([^&]*)?/g,function(n,i,r){t[i]=r}),n=parseInt(t[r],10),!isNaN(n)&&n>0?n:void 0}function f(n){window.gTracker&&window.gTracker.createActionEvent("SourceCodeBrowser","Download","Copy","SourceCode",n)}function t(n){$(".sourceListTabs > div").removeClass("selectedLanguage").addClass("unselectedLanguage"),$(n).removeClass("unselectedLanguage").addClass("selectedLanguage");var t=$(n).attr("id")+"_Content";$(".sourceListContent").children("div").hide(),$("#"+t).show()}function u(n){var t=$(n).next();$(n).children("div:first").toggleClass("sbfc").toggleClass("sbfe"),t.css("display")=="block"?t.css("display","none"):t.css("display","block")}function s(n){var t=$(n).next();$(n).children("div:first").removeClass("sbfc").addClass("sbfe"),t.css("display","block")}function r(t,r){var u=$(t).data("fileid"),o=$(t).data("pathid"),s=$(t).data("name"),f,e;return t&&$(t).children("div:first").hasClass("sbsf")?!1:($("div.sourceList div.sbsf").removeClass("sbsf"),t&&($(t).children("div:first").addClass("sbsf"),t.focus()),$("div#sourceItem").load(n.fileUrl.replace(/fileIdHolder/,u).replace(/pathIdHolder/,o),null,function(){i&&i(u)}),document.title=s,window.history&&window.history.pushState&&r&&(f=$(t).attr("href"),e={title:document.title,fileId:u,pathId:o},window.history.pushState(e,null,f)),!1)}function o(n){var i=n.originalEvent.state,u,f;i&&(document.title=i.title,i.fileId&&i.pathId?(u=$(".sourceList a[data-fileid="+i.fileId+"][data-pathid="+i.pathId+"]"),r(u.get(0)),f=$(u).parents(".langContent").attr("id").replace("_Content",""),t($("#"+f))):($("div#sourceItem").empty(),$(".browseFile *").removeClass("sbsf"),t($(".sourceListTabs > div:first"))))}var n;return{init:e}}(),Galleries.helper=function(){function n(){for(var t=arguments[0],i,n=1;n<arguments.length;n++)i=new RegExp("\\{"+(n-1)+"\\}","gm"),t=t.replace(i,arguments[n]);return t}return{formatString:n}}(),Galleries.project=function(){function s(){o("longdescIframe","longDesc")}function o(n,t){var r=$("#"+n),i=$("#"+n).contents();i.length>0&&i[0].documentElement!=null&&(longDesc=i.find("#"+t),longDesc.length>0&&longDesc.is(":visible")&&r.height()!==longDesc.height()&&r.height(longDesc.height()+20))}function e(n){var i=$(n).attr("toggleText"),t=$(n).text();$(n).text(i),$(n).attr("toggleText",t),$(n).toggleClass("openLink"),$(n).parents(".thread").find(".posts").slideToggle("normal"),$(n).parents(".thread").find(".postSaveReplyLocation").children("#postReplyDiv").hide()}function c(t,i,r){(!r||typeof this.customPromptFunction=="function"&&this.customPromptFunction(t,i,r)||typeof this.customPromptFunction!="function"&&confirm(r))&&n(t,i);return}function h(n){this.customPromptFunction=n}function n(n,t){$.post(n,{__RequestVerificationToken:$("#forgeryForm > input").val()},function(){typeof t=="string"?window.location=t:window.location.reload()})}function f(){var n=$("#authorProjectContainer").data("url");n&&$.ajax({url:n}).done(function(n){$("#authorProjectContainer").html(n)})}function t(n){return n?Number(n.split(",")[1].split(";").shift().replace(/[<>]/g,"").split("=").pop()):null}function i(n){var t=/\d/;return n!=null&&t.test(n)&&!isNaN(n)}function r(n,t,i){var r;switch(n){case 0:r="No "+t+"s";break;case 1:r="One "+t;break;default:r=n+" "+t+"s"}return document.getElementById(i).style.visibility="visible",r}function u(){try{var u=$("#gitRepoInfo").data("url").split("/"),s=u.pop(),o=u.pop(),n="https://api.github.com/repos/"+o+"/"+s,f=n+"/issues?per_page=1",e=n+"/pulls?per_page=1";$.getJSON(e).done(function(n,u,e){var o=e.getResponseHeader("Link")==null?n.length:t(e.getResponseHeader("Link"));i(o)&&($("#pulls").append(r(o,"pull request","pulls")),$.getJSON(f).done(function(n,u,f){var e=(f.getResponseHeader("Link")==null?n.length:t(f.getResponseHeader("Link")))-o;i(e)&&$("#issues").append(r(e,"issue","issues"))}))})}catch(h){}}var l;return{resizeDesc:s,toggleThread:e,manageItem:c,configureManage:h,performManage:n,getAuthorProjects:f,getGitInfo:u}}(),Galleries.cookie=function(){function i(n,t,i,r,u,f){document.cookie=n+"="+escape(t)+(i?"; expires="+i.toUTCString():"")+(r?"; path="+r:"")+(u?"; domain="+u:"")+(f?"; secure":"")}function n(n){var i=document.cookie.indexOf(n+"="),r=i+n.length+1,t;return!i&&n!==document.cookie.substring(0,n.length)?null:i===-1?null:(t=document.cookie.indexOf(";",r),t===-1&&(t=document.cookie.length),unescape(document.cookie.substring(r,t)))}function t(){var f=new Date,u=f.getTimezoneOffset()/-60,r=n("TimezoneOffset"),t;(r==null||r!==u)&&(t=new Date,t.setDate(t.getDate()+7),i("TimezoneOffset",u,t,"/"))}return{setTimezoneOffsetCookie:t}}(),Galleries.form=function(){function t(t,i){return n(t,i)}function n(n,t,i,r){var n=$(n),u=t?$("#"+t):null,f=n.serializeArray();return $.ajax({type:n.attr("method"),url:n.attr("action"),data:f,success:function(t,r,f){u&&u.length>0&&u.html(t),i&&i.call(n.get(0),t,r,f)},error:function(t){r&&r(n.get(0),t)}}),!1}return{submitAsync:t,submitAsyncWithCallback:n}}(),Galleries.url=function(){function i(n,t,i){var r=$("#"+t);return $.ajax({type:"POST",url:n,success:function(n){r.length>0&&r.html(n),i(n)}}),!1}function r(n,t,i,r){var u=$("#"+t);return $.ajax({type:"POST",url:n,data:{__RequestVerificationToken:r},success:function(n){u.length>0&&u.html(n),i(n)}}),!1}function n(n,t){if(typeof s!="undefined"&&s!=null){var r=s.pageName,i=s.prop3;s.pageName+="_"+n,s.prop3+="_"+n,s.t(),s.pageName=r,s.prop3=i}t&&$.post(t)}function t(n,t,i,r){typeof t_omni_utils!="undefined"&&t_omni_utils&&t_omni_utils.omniModTracking&&t_omni_utils.omniModTracking(!0,n,"",t,i,r)}return{postAsyncWithCallback:i,postAsyncWithCallbackAndVerificationToken:r,recordAdditionalPageView:n,trackCustomClick:t}}(),Galleries.utility=function(){function t(n){var t=document.createElement("script"),i;t.type="text/javascript",t.async=!0,t.src=n,i=document.getElementsByTagName("head")[0],i.appendChild(t)}function i(n,i){i?$(window).load(function(){t(n)}):t(n)}function n(t,i){t()?i():setTimeout(function(){n(t,i)},100)}return{loadJavaScript:i,waitFor:n}}(),Galleries.searchIntellisense=function(){function r(n,i,r,u,f,e){return n.length>0&i.length>0?n+"?"+t(i,r,u,f,e)+"&paramsCallback=Galleries.searchIntellisense.getCallbackParams":""}function t(n,t,i,r,u){return"appid="+n+"&scopeid=1&boxId="+t+"&btnId="+i+"&watermark="+encodeURIComponent(r)+"&overrideWatermark=true&searchLocation="+encodeURIComponent(u)+"&allowEmptySearch=true&focusOnInit=false&minimumTermLength=4"}function n(){var t="",r=$("#"+currentSearchContainerId+" input[type='text']"),n;for(t+="&"+encodeURIComponent($(r[0]).attr("name"))+"="+encodeURIComponent($(r[0]).attr("value")),n=$("#"+currentSearchContainerId+" input[type='hidden'].filter"),i=0;i<n.length;i++)t+="&"+encodeURIComponent($(n[i]).attr("name"))+"="+encodeURIComponent($(n[i]).attr("value"));return t}return{getUrl:r,getCallbackParams:n}}(),Galleries.Library=function(){var i=function(){return $("#richDescription iframe").contents()},r=function(r){var f=i(),e,u,o;f.length>0&&(e=$("head",f),e.find('link[href*="'+r+'"]').length==0&&(u=document.createElement("link"),u.rel="stylesheet",u.type="text/css",u.href=r,e.append(u))),o=$("body",f),$("#richDescription tr.mceFirst").attr("style","display:none"),o.attr("contenteditable","false"),t(f,!1),n(!1)},u=function(){var t=$("#LibraryUrlInput"),u=$("#libraryContentError");t.val()&&$.ajax({url:"/site/library/description?url="+t.val()}).done(function(f){var s=i();if(s.length>0){var e=$("body",s),o=$("#LibraryPublishDate"),c=$("#LibraryShortId"),h=$("#LibraryUrl");f.Error?(u.html(f.Error),o.val(""),e.html("")):(u.html(""),r(f.DescriptionCSS),e.html(f.Content),e.trigger("click"),n(!1),h.val(t.val()),o.val(f.PublishDate),c.val(f.ShortId))}})},f=function(r){var u=i(),e=$("body",u),f;u.length>0&&(f=$("#libraryContainer"),r==="LibrarySample_Tab"?(f.attr("style","display:block"),$("#richDescription tr.mceFirst").attr("style","display:none"),e.attr("contenteditable","false"),t(u,!1),n(!1)):(f.attr("style","display:none"),$("#richDescription tr.mceFirst").attr("style","display:block"),n(!0),e.attr("contenteditable","true"),t(u,!0),$("head",u).remove("libDescCss")))},n=function(n){$("#descriptionProgressMeter .pluginHolder").attr("style","display:"+(n?"block":"none"))},t=function(n,t){if($.browser.mozilla&&n&&n.length>0){var i=t?"on":"off";n.get(0).designMode=i}};return{setContent:u,toggle:f,addCss:r}}(),StreamEvents={},StreamEvents.tracker=function(){function n(n,r){var u=$.extend(t,n?n:{}),f=$.extend(i,r?r:{});return u.init(f),u}var i={beaconUrl:null,pageEventType:"Page",pageActionEventType:"PageAction",pageEventArg:null},t={option:null,init:function(n){this.option=n},createActionEvent:function(n,t,i,r,u){var f=$.extend({},this.option.pageEventArg,{Section:n,ActionType:t,Action:i,ActionContentType:r,ActionContent:u});this.createEvent(this.option.pageActionEventType,f)},createEvent:function(n,t){var i=this.option.beaconUrl+"?Type="+escape(n)+"&"+$.param(t)+"&U="+escape(+new Date);$("<img />").attr("src",i)}};return{create:n}}()