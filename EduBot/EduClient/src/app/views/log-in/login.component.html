<div class="modal fade" bsModal #loginModal="bs-modal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content primary-color-dark">
            <div class="modal-header">
                <h4 class="modal-title pull-left">
                    <i class="fa fa-user-circle-o"></i> {{ 'login' | translate }} </h4>
                <button type="button" class="close pull-right" title="Close" (click)="loginModal.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="pl-3 pt-3 container" *ngIf="!loggedIn">

                    <div *ngIf="action=='logging-in' || action=='passw-change'" >
                        <formfield [field]='fieldLogin' class='formfield' id="login"></formfield>
                        <formfield [field]='fieldPassw' class='formfield' type="password"></formfield>
                        <div *ngIf="registerSuccess" class='text-success'>
                            <p>{{ 'login.success_register' | translate }}</p>
                        </div>
                        <div class='text-danger'>
                            <p>{{ errCredentials | translate }}</p>
                        </div>
                    </div>
                    
                    <div *ngIf="action=='register' || action=='passw-change'" >
                        <formfield [field]='fieldNewLogin' class='formfield'></formfield>
                        <formfield [field]='fieldAge' class='formfield'></formfield>
                        <formfield [field]='fieldNewPassw' class='formfield' type="password"></formfield>
                        <formfield [field]='fieldRepPassw' class='formfield' type="password"></formfield>
                        <div class="text-danger">
                            <p>{{ errPasswChange | translate }}</p>
                        </div>
                        <div *ngIf="registerFailure" class='text-danger'>
                            <p>{{ 'login.success_failure' | translate }}</p>
                        </div>
                        <div class="form-group row">
                            <label class="col-4" tooltip="Wyrażam zgodę aby aplikacja korzystała z kamerki internetowej i robiła cyklicznie zdjęcia, oraz zapamiętywała ich stan, aby jak najlepiej dostosować program do moich potrzeb." >
                                <strong>
                                    Potwierdzam <br> regulamin &nbsp; <i class="fa fa-info-circle" ></i>
                                </strong>
                            </label>
                            <div class="col-1 d-flex align-items-center">
                                <div (click)="regulationsApproval=!regulationsApproval"
                                    [ngClass]="regulationsApproval ? 'fa fa-check-square-o' : 'fa fa-square-o checkbox-input'" >
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-2" >
                        <div>
                            <a *ngIf="action!='logging-in'" class="ml-2" (click)="setAction('logging-in')">{{ 'login.log_in' | translate }}</a>
                            <a *ngIf="action!='register'" class="ml-2" (click)="setAction('register')">{{ 'login.register' | translate }}</a>
                            <span *ngIf="action!='passw-change'" class="v-hr"></span>
                            <a *ngIf="action!='passw-change'" class="ml-2" (click)="setAction('passw-change')">{{ 'login.password_change' | translate }}</a>
                        </div>
                    </div>
                    <div class="row" >
                        <button [disabled]="passwordCmp()" class="btn btn-primary ml-auto" (click)='submitLogin()'><strong>{{ 'common.ok' | translate }}</strong></button>
                    </div>
                
                </div>
                
                <div *ngIf="loggedIn">
                    {{ 'login.success' | translate }}
                </div>
            </div>
        </div>
    </div>
</div>